{"ast":null,"code":"var _jsxFileName = \"/home/anonymous/PharmaBuddy/src/components/addMed.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useRef, useState, useEffect } from \"react\";\nimport userStore from \"../stores/userStore\";\nimport { Navigate } from \"react-router-dom\";\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\nimport db from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddMed() {\n  _s();\n\n  const user = userStore.getState().user;\n  console.log(user);\n  const [tokenAdd, setTokenAdd] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n  useEffect(() => {\n    if (!user.uid) return;\n\n    const code = async () => {\n      const ref = doc(db, \"Pharma\", user.uid);\n      const docSnap = await getDoc(ref);\n      var data = docSnap.data();\n      var oldmeds = data.meds;\n\n      if (tokenAdd) {\n        try {\n          var found = false;\n\n          for (var i = 0; i < oldmeds.length; i++) {\n            if (oldmeds[i].name === nameRef.current.value) {\n              oldmeds[i].quantity += parseInt(quantityRef.current.value);\n              oldmeds[i].price = parseInt(priceRef.current.value);\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            oldmeds.push({\n              name: nameRef.current.value,\n              quantity: parseInt(quantityRef.current.value),\n              price: parseInt(priceRef.current.value)\n            });\n          }\n\n          data.meds = oldmeds;\n          await setDoc(ref, data).then(alert(\"Updated\"));\n          setRedirect(true);\n        } catch (e) {\n          alert(e.message);\n        }\n      }\n    };\n\n    code();\n    setTokenAdd(false);\n  }, [tokenAdd, user.uid]);\n  const nameRef = useRef(null);\n  const quantityRef = useRef(null);\n  const priceRef = useRef(null);\n  if (!user) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 21\n  }, this);\n\n  const handleAdd = e => {\n    e.preventDefault();\n    setTokenAdd(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: redirect ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        class: \"btn\",\n        type: \"text\",\n        placeholder: \"Med Name\",\n        ref: nameRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        class: \"btn\",\n        type: \"text\",\n        placeholder: \"quantity\",\n        ref: quantityRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        class: \"btn\",\n        type: \"text\",\n        placeholder: \"price\",\n        ref: priceRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        class: \"btn selected btn-fluid2\",\n        type: \"button\",\n        value: \"Add Stock\",\n        onClick: handleAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddMed, \"EX7wlWSZBNwsKsJ8LFY192ezySs=\");\n\n_c = AddMed;\nexport default AddMed;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddMed\");","map":{"version":3,"sources":["/home/anonymous/PharmaBuddy/src/components/addMed.jsx"],"names":["React","useRef","useState","useEffect","userStore","Navigate","getDoc","setDoc","doc","db","AddMed","user","getState","console","log","tokenAdd","setTokenAdd","redirect","setRedirect","uid","code","ref","docSnap","data","oldmeds","meds","found","i","length","name","nameRef","current","value","quantity","parseInt","quantityRef","price","priceRef","push","then","alert","e","message","handleAdd","preventDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useRef, useState, useEffect } from \"react\";\nimport userStore from \"../stores/userStore\";\nimport { Navigate } from \"react-router-dom\";\nimport { getDoc, setDoc, doc } from \"firebase/firestore\";\nimport db from \"../firebase\";\n\nfunction AddMed() {\n  const user = userStore.getState().user;\n  console.log(user);\n  const [tokenAdd, setTokenAdd] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n  useEffect(() => {\n    if (!user.uid) return;\n    const code = async () => {\n      const ref = doc(db, \"Pharma\", user.uid);\n      const docSnap = await getDoc(ref);\n      var data = docSnap.data();\n      var oldmeds = data.meds;\n      if (tokenAdd) {\n        try {\n          var found = false;\n          for (var i = 0; i < oldmeds.length; i++) {\n            if (oldmeds[i].name === nameRef.current.value) {\n              oldmeds[i].quantity += parseInt(quantityRef.current.value);\n              oldmeds[i].price = parseInt(priceRef.current.value);\n              found = true;\n              break;\n            }\n          }\n          if (!found) {\n            oldmeds.push({\n              name: nameRef.current.value,\n              quantity: parseInt(quantityRef.current.value),\n              price: parseInt(priceRef.current.value),\n            });\n          }\n          data.meds = oldmeds;\n          await setDoc(ref, data).then(alert(\"Updated\"));\n          setRedirect(true);\n        } catch (e) {\n          alert(e.message);\n        }\n      }\n    };\n    code();\n    setTokenAdd(false);\n  }, [tokenAdd, user.uid]);\n  const nameRef = useRef(null);\n  const quantityRef = useRef(null);\n  const priceRef = useRef(null);\n  if (!user) return <Navigate to=\"/\" />;\n  const handleAdd = (e) => {\n    e.preventDefault();\n    setTokenAdd(true);\n  };\n  return (\n    <div className=\"container\">\n      {redirect ? (\n        <Navigate to=\"home\" />\n      ) : (\n        <form action=\"\">\n          <input class=\"btn\" type=\"text\" placeholder=\"Med Name\" ref={nameRef} />\n          <input\n            class=\"btn\"\n            type=\"text\"\n            placeholder=\"quantity\"\n            ref={quantityRef}\n          />\n          <input class=\"btn\" type=\"text\" placeholder=\"price\" ref={priceRef} />\n          <br />\n          <br />\n          <input\n            class=\"btn selected btn-fluid2\"\n            type=\"button\"\n            value=\"Add Stock\"\n            onClick={handleAdd}\n          />\n        </form>\n      )}\n    </div>\n  );\n}\n\nexport default AddMed;\n"]},"metadata":{},"sourceType":"module"}